<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title></title>
	<style type="text/css">
		select[multiple] {
			width: 200px;
			height: 100px;
		}
	</style>
</head>
<body>

<div data-sub="@ns:collectionsApp">
	<h2>People</h2>
	<ul data-sub="`forArray:people">
		<li data-sub="{{addRowItemNs /}}">
			<div>
				{{:name}} <input type="button" value="add child" data-sub="$click:.|#addChild">
			</div>
			<ul data-sub="`listView:children">
				<li>
					\{\{:#data\}\} \{\{ts /\}\}
				</li>
			</ul>
		</li>
	</ul>
</div>

<label><input data-sub='`val:*ts' type='checkbox'/> Show render time stamp</label>
<script src="../../ref/jquery.js"></script>
<script src="../../src/modelProxy.js"></script>
<script src="../../src/eventSubscription.js"></script>
<script src="../../src/declarative.js"></script>
<script src="../../src/template.js"></script>
<script src="../../src/must-have-extensions.js"></script>
<script src="../../ref/jsrender.js"></script>
<script src="../../src/template-engines/template-engine-jsrender.js"></script>

<script>

	//	var Person = function( name, children ) {
	//		this.name = name;
	//		this.children = children;
	//	};
	//	Person.prototype.addChild = function( e ) {
	//		this.cd( "children" ).push( "new child" );
	//	};

	//instead of using the above code, use via.util.factory, so that you don't need to use
	// new Person to create a person, although "new" operator is still supported

	var Person = via.util.factory(
		function Person ( name, children ) {
			this.name = name;
			this.children = children;
		},
		{
			addChild: function( e ) {
				this.cd( "children" ).push( "new child" )
			}
		}
	);

	via.set( "collectionsApp", {
		people: [
			Person( "Annabelle", ["Arnie", "Anders", "Apple"] ),
			Person( "Bertie", ["Boutros-Boutros", "Brianna", "Barbie", "Bee-bop"] ),
			Person( "Charles", ["Cayenne", "Cleopatra"] )
		]
	} );

</script>

</body>
</html>