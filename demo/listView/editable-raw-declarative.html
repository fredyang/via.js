<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Editable raow list view</title>
	<script src="../../ref/jquery.js"></script>
	<script src="../../ref/jquery.tmpl.js"></script>
	<script src="../../src/model.js"></script>
	<script src="../../src/event.js"></script>
	<script src="../../src/declarative.js"></script>
	<script src="../../src/template.js"></script>
	<script src="../../src/must-have-extensions.js"></script>
	<script src="../../src/nice-to-have-extensions/editableListView.js"></script>
	<script type="text/javascript"
	        src="../../src/template-extensions/template-engine-jqueryTmpl.js"></script>
	<script src="data.js"></script>
</head>
<body data-sub="@ns:contacts">
<h3>original contacts</h3>

<table>
	<thead>
	<tr>
		<th>First Name</th>
		<th>Last Name</th>
		<th>action</th>
	</tr>
	</thead>

	<!--the context path is model items-->
	<tbody data-sub="`listView:.|contactRow
					 `editableListView:.|contactRowInEditMode">
	</tbody>
	<tfoot>
	<tr>
		<td colspan="3">
			<input type="button" value="New Contact" data-sub="`newItemButton"/>
		</td>
	</tr>
	<tr data-sub="@ns:*edit.item
				  `newItemView:.|contactRowInNewMode"></tr>
	</tfoot>
</table>

</body>

<script type="text/tmpl" id="contactRow">
	<tr>
		<td>${firstName}</td>
		<td>${lastName}</td>
		<td>
			<!--these buttton will raise an custom event edit, delete, which will
			be handled by parent-->
			<input type="button" value="edit" data-sub="`editButton"/>
			<input type="button" value="remove" data-sub="`deleteButton"/>
			${ts}
		</td>
	</tr>
</script>

<script type="text/template" id="contactRowInEditMode">
	<!--the context path is items*edit.item, and we need to specify the context path
	using the template context
	-->
	<tr data-sub="@ns:${$item.modelPath}.item">
		<td>
			<input type="text" class="firstName" data-sub="`val:.firstName"/>
		</td>

		<td>
			<input type="text" class="lastName" data-sub="`val:.lastName"/>
		</td>
		<td>
			<!--these buttton will raise an custom event update, cancel, which will
						be handled by parent-->
			<input type="button" value="Update" data-sub="`updateButton"/>
			<input type="button" value="Cancel" data-sub="`cancelButton"/>
			${ts}
		</td>
	</tr>
</script>

<script type="text/template" id="contactRowInNewMode">
	<td>
		<input type="text" class="firstName" data-sub="`val:.firstName"/>
	</td>

	<td>
		<input type="text" class="lastName" data-sub="`val:.lastName"/>
	</td>
	<td>
		<input type="button" value="Add" data-sub="$click:.|*saveEditItem"/>
		<input type="button" value="Cancel" data-sub="$click:.|*cancelEditItem"/>
		${ts}
	</td>
</script>
</html>