<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title></title>
</head>
<body>

<label>Please input your name: <input type="text" id="txtName"/>
	<input id="btnGet" value="Get message" type="button"/>
</label>

<div id="divMessage"/>

</body>
<script src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript" src="http://code.semanticsworks.com/assets/js/viaProxy.all.debug.js"></script>
<script>

	var rootProxy = via();

	rootProxy.create( "helloApp", {
		name: null,
		greeting: "Hello",
		message: function() {
			return this.name ? this.greeting + "," + this.name : "";
		}
	} );

	$( "#btnGet" ).addViewHandler( "click", "helloApp.name", function( viewEvent ) {
		viewEvent.updateModel( $( "#txtName" ).val() );
	} );

	$( "#divMessage" ).addModelHandler( "helloApp.message", "afterUpdate", function ( modelEvent ) {
		$( this ).text( modelEvent.currentValue() );
	} );

//	$(function () {
//
//		$("#btnGet").click(function () {
//			var name = $("#txtName").val();
//			if (name) {
//				$("#divMessage").text("Hello," + name);
//			} else {
//				$("#divMessage").text("");
//			}
//		});
//	});
</script>
</html>